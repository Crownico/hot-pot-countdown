import{_ as S,u as k,i as P}from"./index-6457758f.js";import{o as p,c as v,n as m,p as R,q as V,d as w,t as y,u as x,v as K,x as Q,y as j,z as W,e as $,A as T,B as D,b as c,w as f,C as b,D as L,F as M,G as E,r as A,H as O,I as z,J as X,K as Y,L as q,M as Z,O as G,P as H,Q as ee,R as oe,S as te,T as ne}from"./vendor-4c79c405.js";const se={},ae={class:"running-light-btn"},le={class:"light-btn",id:"line"},de={class:"light-btn-inner"};function ce(n,s){return p(),v("div",ae,[m("button",le,[m("span",de,[R(n.$slots,"default",{},()=>[V("button")],!0)])])])}const re=S(se,[["render",ce],["__scopeId","data-v-93a48c77"]]),ie=w({__name:"index",props:{seconds:{default:20},controlSignal:{}},emits:["getCountdownState","getCurCountdownTime"],setup(n,{emit:s}){const t=n,e=y(t.seconds),a=y();x(e,o=>{s("getCurCountdownTime",o),t.seconds!==0&&o===0&&s("getCountdownState","overed")});function r(o,l,u=1e3){let g=0,C=null;const F=Date.now();function h(){g++;const N=Date.now()-(F+g*u),J=u-N<=0?0:u-N,U=o*1e3-(Date.now()-F);if(l(Math.round(U/1e3)),U<=0||a.value!=="working"){clearTimeout(C);return}clearTimeout(C),C=setTimeout(h,J)}C=setTimeout(h,u)}x(()=>t.controlSignal,o=>{o&&{start:i,pause:d,reset:_}[o]()});function i(){s("getCountdownState","working"),a.value="working",r(e.value,o=>{a.value==="working"&&(e.value=o)})}function d(){s("getCountdownState","pause"),a.value="pause"}function _(){s("getCountdownState","initial"),a.value="initial",e.value=t.seconds}return(o,l)=>R(o.$slots,"countdown",{seconds:e.value})}}),ue=["xlink:href"],I=w({__name:"index",props:{name:{},prefix:{default:"icon"},iconStyle:{default:()=>({width:"24px",height:"24px"})}},setup(n){const s=n,t=K(()=>`#${s.prefix}-${s.name}`);return(e,a)=>(p(),v("svg",{style:Q(e.iconStyle),"aria-hidden":"true"},[m("use",{"xlink:href":t.value},null,8,ue)],4))}});function _e(n){const s=Math.floor(n/60),t=n%60,e=Math.floor(s/60),a=s%60,r=Math.floor(e/24),i=e%24,d=r.toString().padStart(2,"0"),_=i.toString().padStart(2,"0"),o=a.toString().padStart(2,"0"),l=t.toString().padStart(2,"0"),u=`${d}天 ${_}:${o}:${l}`,g=`${_}:${o}:${l}`,C=`${o}:${l}`;return{days:d,hours:_,minutes:o,seconds:l,ddhhmmss:u,hhmmss:g,mmss:C}}function me(n){return n===null?"null":typeof n!="object"?typeof n:Object.prototype.toString.call(n).slice(8,-1).toLocaleLowerCase()}const B=(n,s)=>{if(s){const{icon:t,type:e="info",dangerouslyUseHTMLString:a=!1,customClass:r="antd",duration:i=4e3,showClose:d=!1,center:_=!1,offset:o=20,appendTo:l=document.body,grouping:u=!1,onClose:g}=s;return j({message:n,type:e,icon:t,dangerouslyUseHTMLString:a,duration:i,showClose:d,center:_,offset:o,appendTo:l,grouping:u,customClass:r==="antd"?"pure-message":"",onClose:()=>{g&&me(g)==="function"&&g()}})}else return j({message:n,customClass:"pure-message"})},pe={class:"countdown-controller"},fe={class:"bar--left"},ge={class:"food--name"},ve={class:"bar-right"},ye={class:"countdown-time-wrapper"},he={class:"countdown-time"},we=w({__name:"index",props:{foodName:{},countdownTotalTime:{}},setup(n){const s=n;W(o=>({"87308a38":a.value}));const t=y("initial");function e(o){t.value=o}x(t,o=>{o==="working"&&B(`${s.foodName} 开始计时`,{type:"success",center:!0})});const a=y();function r(o){a.value=100-Math.round(o/s.countdownTotalTime*100)+"%"}const i=y("reset");let d=0;function _(){d++,d>1&&(d=0);const o={0:"reset",1:"start"};i.value=o[d]}return(o,l)=>(p(),v("div",{class:L(["hotpot-countdown-bar",t.value==="overed"?"countdown--overed":""])},[m("div",{class:L(["hotpot-countdown-bar-inner"]),onClick:_},[m("div",pe,[t.value==="initial"?(p(),$(I,{key:0,name:"kaishi",class:"controller-icon--start"})):T("",!0),t.value==="working"?(p(),$(I,{key:1,name:"tingzhi",class:"controller-icon--reset"})):T("",!0),t.value==="overed"?(p(),$(I,{key:2,name:"chongxinbofang",class:"controller-icon--again"})):T("",!0)]),m("div",fe,[m("div",ge,D(t.value==="overed"?`${o.foodName} 开吃啦！`:o.foodName),1)]),m("div",ve,[m("div",ye,[c(ie,{"control-signal":i.value,seconds:o.countdownTotalTime,onGetCountdownState:e,onGetCurCountdownTime:r},{countdown:f(u=>[m("div",he,D(b(_e)(u.seconds).mmss),1)]),_:1},8,["control-signal","seconds"])])])])],2))}});const Ce=S(we,[["__scopeId","data-v-2bfebbe0"]]),be={class:"hotpot-bar-list"},Se=w({__name:"CountdownBarList",setup(n){const s=k();return(t,e)=>(p(),v("div",be,[(p(!0),v(M,null,E(b(s).getSortedSelectedFoodsByTime,a=>(p(),$(Ce,{key:a.id,"food-name":a.name,"countdown-total-time":a.cooking_time},null,8,["food-name","countdown-total-time"]))),128))]))}}),$e={class:"hotpot-foodslist-card"},xe={class:"card-header"},ke={class:"header--title"},Fe={class:"header-btn"},Te={class:"card-content"},Ve={class:"content-inner"},De=["onClick"],Be=w({__name:"index",props:{category:{},foods:{}},emits:["add-food"],setup(n,{emit:s}){const t=n,e=k();function a(r){e.selectedFoods.includes(r)?e.selectedFoods=e.selectedFoods.filter(i=>i.id!==r.id):e.selectedFoods.push(r)}return(r,i)=>{const d=A("Plus"),_=O;return p(),v("div",$e,[m("div",xe,[m("div",ke,D(b(P)[t.category])+"：",1),m("div",Fe,[m("div",{class:"btn-add-food",onClick:i[0]||(i[0]=o=>s("add-food",t.category))},[c(_,{color:"#999"},{default:f(()=>[c(d)]),_:1})])])]),m("div",Te,[m("div",Ve,[(p(!0),v(M,null,E(t.foods,o=>(p(),v("div",{key:o.id,class:L({"content-item":!0,"content-item--selected":b(e).selectedFoods.includes(o)}),onClick:l=>a(o)},D(o.name),11,De))),128))])])])}}});const Ie=S(Be,[["__scopeId","data-v-d450184d"]]),Le=n=>(G("data-v-a0e16c5e"),n=n(),H(),n),Me={class:"hotpot-add-food"},Ee={class:"form-btns"},Ne=Le(()=>m("div",{class:"explanation-text"},"*数据存储在本地，切换设备将会丢失数据",-1)),Ue=w({__name:"index",props:{categrory:{}},emits:["foodSubmit","cancel"],setup(n,{emit:s}){const t=n,e=z({name:"",cooking_time:"",description:""}),a=y();a.value=P[t.categrory];const r=z({name:[{required:!0,message:"请输入食材名",trigger:"blur"},{min:1,max:5,message:"请输入有效长度",trigger:"blur"}],cooking_time:[{required:!0,message:"请输入烹饪时间",trigger:"blur"},{min:1,message:"请输入有效时间",trigger:"blur"}]}),i=k(),d=y(),_=o=>{o&&o.validate(l=>{if(l){s("foodSubmit");const u={id:Date.now(),name:e.name,cooking_time:+e.cooking_time,description:e.description,category:t.categrory};i.addFood(u),B(`添加${e.name}成功`,{type:"success"})}else return B("添加失败",{type:"error"}),!1})};return(o,l)=>{const u=X,g=Y,C=q,F=Z;return p(),v("div",Me,[c(F,{ref_key:"formRef",ref:d,rules:r,"label-position":"top","label-width":"80vw",model:e,style:{"max-width":"460px"}},{default:f(()=>[c(g,{label:"食材名称：",prop:"name"},{default:f(()=>[c(u,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=h=>e.name=h),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])]),_:1}),c(g,{label:"倒计时间（秒）：",prop:"cooking_time"},{default:f(()=>[c(u,{type:"number",modelValue:e.cooking_time,"onUpdate:modelValue":l[1]||(l[1]=h=>e.cooking_time=h)},null,8,["modelValue"])]),_:1}),c(g,{label:"种类：",prop:"category"},{default:f(()=>[c(u,{"model-value":a.value,disabled:""},null,8,["model-value"])]),_:1}),c(g,{label:"描述：",prop:"description"},{default:f(()=>[c(u,{modelValue:e.description,"onUpdate:modelValue":l[2]||(l[2]=h=>e.description=h)},null,8,["modelValue"])]),_:1}),c(g,null,{default:f(()=>[m("div",Ee,[c(C,{type:"primary",onClick:l[3]||(l[3]=h=>_(d.value))},{default:f(()=>[V("添加")]),_:1}),c(C,{onClick:l[4]||(l[4]=h=>s("cancel"))},{default:f(()=>[V("取消")]),_:1})])]),_:1})]),_:1},8,["rules","model"]),Ne])}}});const je=S(Ue,[["__scopeId","data-v-a0e16c5e"]]),ze={class:"hotpot-dialog"},Pe=w({__name:"index",props:{dialogVisible:{type:Boolean},category:{}},emits:["dialogClosed"],setup(n,{emit:s}){const t=n,e=y(!1);x(()=>t.dialogVisible,i=>{i?e.value=!0:e.value=!1});const a=()=>{e.value=!1},r=()=>{e.value=!1};return(i,d)=>{const _=ee;return p(),v("div",ze,[c(_,{modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=o=>e.value=o),width:"80vw",center:"",title:"添加/修改食材","destroy-on-close":"",onClose:d[1]||(d[1]=o=>s("dialogClosed"))},{default:f(()=>[c(je,{categrory:t.category,onFoodSubmit:a,onCancel:r},null,8,["categrory"])]),_:1},8,["modelValue"])])}}}),Re={class:"foods-list"},Ae={class:"foods-list-btns"},Oe=w({__name:"index",props:{foods:{}},setup(n){const s=n,t=y(!1),e=y("beans"),a=_=>{t.value=!0,e.value=_},r=()=>{t.value=!1},i=k(),d=()=>{oe.confirm("添加和修改的食材将会被清空，确认重置吗?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{i.resetAllfoods(),B("重置成功",{type:"success"})})};return(_,o)=>{const l=q;return p(),v("div",Re,[(p(!0),v(M,null,E(s.foods,u=>(p(),$(Ie,{key:u.category,category:u.category,foods:u.list,onAddFood:a},null,8,["category","foods"]))),128)),m("div",Ae,[c(l,{type:"primary",text:"重置菜单",onClick:d},{default:f(()=>[V("重置菜单")]),_:1})]),c(Pe,{"dialog-visible":t.value,category:e.value,onDialogClosed:r},null,8,["dialog-visible","category"])])}}});const qe=S(Oe,[["__scopeId","data-v-3ab73904"]]),Ge=n=>(G("data-v-453b2579"),n=n(),H(),n),He={class:"hotpot-foods-select-list"},Je=Ge(()=>m("h3",{class:"food-list-header"},"食材列表",-1)),Ke=w({__name:"FoodsSelectedList",props:{openDrawer:{type:Boolean},foodsList:{}},emits:["drawerClose"],setup(n,{emit:s}){const t=n,e=y(!1);return x(()=>t.openDrawer,a=>e.value=a),(a,r)=>{const i=te;return p(),v("div",He,[c(i,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=d=>e.value=d),direction:"btt",onClose:r[1]||(r[1]=d=>s("drawerClose")),size:"60%"},{header:f(()=>[Je]),default:f(()=>[c(qe,{class:"food-list",foods:t.foodsList},null,8,["foods"])]),_:1},8,["modelValue"])])}}});const Qe=S(Ke,[["__scopeId","data-v-453b2579"]]),We=""+new URL("../jpg/dog-684ecb6b.jpg",import.meta.url).href,Xe={class:"hotpot"},Ye=w({__name:"index",setup(n){const s=y(!1),t=k();function e(){s.value=!0}function a(){s.value=!1}return(r,i)=>{const d=ne,_=A("Plus"),o=O,l=re;return p(),v("div",Xe,[b(t).getSortedSelectedFoodsByTime.length===0?(p(),$(d,{key:0,class:"empty-description",image:b(We),description:"点击下方按钮添加食材计时"},null,8,["image"])):T("",!0),c(Se),c(Qe,{"open-drawer":s.value,"foods-list":b(t).getCategoryFoods,onDrawerClose:a},null,8,["open-drawer","foods-list"]),c(l,{class:"btn-add-food",onClick:e},{default:f(()=>[c(o,{class:"btn-icon",size:20},{default:f(()=>[c(_)]),_:1})]),_:1})])}}});const oo=S(Ye,[["__scopeId","data-v-a024d43c"]]);export{oo as default};
